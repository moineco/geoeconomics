ggplot(jp0_shp) +
geom_sf(color = "blue", fill = "white", lwd = 0.07)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| message: false
library(tidyverse)
library(sf)
#| code-fold: false
jp0_shp <- st_read("data/shapefile/jp_adm0_shp/jpn_admbnda_adm0_2019.shp")
jp1_shp <- st_read("data/shapefile/jp_adm1_shp/jpn_admbnda_adm1_2019.shp")
jp2_shp <- st_read("data/shapefile/jp_adm2_shp/jpn_admbnda_adm2_2019.shp")
#| code-fold: false
jp0_shp # for admin level 0
jp1_shp # for admin level 1
jp2_shp # for admin level 2
#| code-fold: false
st_crs(jp0_shp) # for admin level 0
st_crs(jp1_shp) # for admin level 1
st_crs(jp2_shp) # for admin level 2
#| code-fold: false
ggplot(jp0_shp) +
geom_sf()
ggplot(jp0_shp) +
geom_sf(color = "blue", fill = "white", lwd = 0.07)
#| code-fold: false
ggplot(jp1_shp) +
geom_sf()
#| code-fold: false
ggplot(jp2_shp) +
geom_sf()
ggplot(jp1_shp) +
geom_sf(color = "blue",  fill = "white", lwd = 0.07)
ggplot(jp1_shp) +
geom_sf(aes(fill = ADM1_PCODE),  show.legend = FALSE)
ggplot(jp2_shp) +
geom_sf(color = "blue",  fill = "white", lwd = 0.07)
ggplot(jp2_shp) +
geom_sf(aes(fill = ADM2_PCODE),  show.legend = FALSE)
ggplot(jp0_shp) +
geom_sf(aes(fill = ADM0_PCODE),  show.legend = FALSE)
#| code-fold: false
#| message: false
jp0_shp # for admin level 0
jp1_shp # for admin level 1
jp2_shp # for admin level 2
#| code-fold: false
#| message: false
st_crs(jp0_shp) # for admin level 0
st_crs(jp1_shp) # for admin level 1
st_crs(jp2_shp) # for admin level 2
#| message: false
library(tidyverse)
library(sf)
#| code-fold: false
#| message: false
jp0_shp <- st_read("data/shapefile/jp_adm0_shp/jpn_admbnda_adm0_2019.shp")
jp1_shp <- st_read("data/shapefile/jp_adm1_shp/jpn_admbnda_adm1_2019.shp")
jp2_shp <- st_read("data/shapefile/jp_adm2_shp/jpn_admbnda_adm2_2019.shp")
#| code-fold: false
#| message: false
jp0_shp # for admin level 0
jp1_shp # for admin level 1
jp2_shp # for admin level 2
#| code-fold: false
#| message: false
st_crs(jp0_shp) # for admin level 0
st_crs(jp1_shp) # for admin level 1
st_crs(jp2_shp) # for admin level 2
#| code-fold: false
ggplot(jp0_shp) +
geom_sf()
ggplot(jp0_shp) +
geom_sf(color = "blue", fill = "white", lwd = 0.07)
ggplot(jp0_shp) +
geom_sf(aes(fill = ADM0_PCODE),  show.legend = FALSE)
#| code-fold: false
ggplot(jp1_shp) +
geom_sf()
ggplot(jp1_shp) +
geom_sf(color = "blue",  fill = "white", lwd = 0.07)
ggplot(jp1_shp) +
geom_sf(aes(fill = ADM1_PCODE),  show.legend = FALSE)
#| code-fold: false
ggplot(jp2_shp) +
geom_sf()
ggplot(jp2_shp) +
geom_sf(color = "blue",  fill = "white", lwd = 0.07)
ggplot(jp2_shp) +
geom_sf(aes(fill = ADM2_PCODE),  show.legend = FALSE)
#| code-fold: false
#| message: false
jp0_shp # for admin level 0
jp1_shp # for admin level 1
jp2_shp # for admin level 2
#| message: false
library(tidyverse)
library(sf)
#| code-fold: false
#| message: false
jp0_shp <- st_read("data/shapefile/jp_adm0_shp/jpn_admbnda_adm0_2019.shp")
jp1_shp <- st_read("data/shapefile/jp_adm1_shp/jpn_admbnda_adm1_2019.shp")
jp2_shp <- st_read("data/shapefile/jp_adm2_shp/jpn_admbnda_adm2_2019.shp")
#| code-fold: false
#| message: false
jp0_shp # for admin level 0
jp1_shp # for admin level 1
jp2_shp # for admin level 2
#| code-fold: false
#| message: false
st_crs(jp0_shp) # for admin level 0
st_crs(jp1_shp) # for admin level 1
st_crs(jp2_shp) # for admin level 2
#| code-fold: false
ggplot(jp0_shp) +
geom_sf()
ggplot(jp0_shp) +
geom_sf(color = "blue", fill = "white", lwd = 0.07)
ggplot(jp0_shp) +
geom_sf(aes(fill = ADM0_PCODE),  show.legend = FALSE)
#| code-fold: false
ggplot(jp1_shp) +
geom_sf()
ggplot(jp1_shp) +
geom_sf(color = "blue",  fill = "white", lwd = 0.07)
ggplot(jp1_shp) +
geom_sf(aes(fill = ADM1_PCODE),  show.legend = FALSE)
#| code-fold: false
ggplot(jp2_shp) +
geom_sf()
ggplot(jp2_shp) +
geom_sf(color = "blue",  fill = "white", lwd = 0.07)
ggplot(jp2_shp) +
geom_sf(aes(fill = ADM2_PCODE),  show.legend = FALSE)
library(tidyverse)
library(sf)
library(knitr)
map_data <- st_read("data/shapefile/ne_10m_admin_0_countries")
features_map_data <- map_data %>%
as_tibble() %>%
select(-geometry) %>%
head(10)
kable(features_map_data)
europe_map_data <- map_data %>%
select(NAME, CONTINENT, SUBREGION, POP_EST) %>%
filter(CONTINENT == "Europe")
ggplot(europe_map_data) + geom_sf() +
theme_minimal()
europe_map_data <- europe_map_data %>%
st_crop(xmin=-25, xmax=55, ymin=35, ymax=71)
ggplot(europe_map_data) + geom_sf() +
theme_minimal()
ggplot(europe_map_data) + geom_sf(aes(fill=SUBREGION)) +
theme_minimal()
#| warning: false
europe_map_data <- map_data %>%
select(NAME, CONTINENT, SUBREGION, POP_EST) %>%
filter(CONTINENT == "Europe")
#| message: false
library(tidyverse)
library(sf)
library(knitr)
#| message: false
map_data <- st_read("data/shapefile/ne_10m_admin_0_countries")
features_map_data <- map_data %>%
as_tibble() %>%
select(-geometry) %>%
head(10)
kable(features_map_data)
#| warning: false
europe_map_data <- map_data %>%
select(NAME, CONTINENT, SUBREGION, POP_EST) %>%
filter(CONTINENT == "Europe")
ggplot(europe_map_data) + geom_sf() +
theme_minimal()
europe_map_data <- europe_map_data %>%
st_crop(xmin=-25, xmax=55, ymin=35, ymax=71)
ggplot(europe_map_data) + geom_sf() +
theme_minimal()
ggplot(europe_map_data) + geom_sf(aes(fill=SUBREGION)) +
theme_minimal()
#| warning: false
europe_map_data <- europe_map_data %>%
st_crop(xmin=-25, xmax=55, ymin=35, ymax=71)
#| message: false
library(dplyr)
#| message: false
library(sf)
bayarea <- read_sf("data/san-francisco/counties-bayarea.shp")
glimpse(bayarea)
#| message: false
library(tmap)
tm_shape(bayarea) +
tm_polygons(col = "gray")
bayarea_cent <- st_centroid(bayarea)
library(mapview)
mapview(list(bayarea, bayarea_cent))
# Topojson
usa <- read_sf("http://bit.ly/2NhznGt")
# Plotting discussed later
st_geometry(usa) %>% plot()
# Uses Open Street Map
tmaptools::geocode_OSM("Hilton San Francisco Union Square",
as.sf = TRUE) %>%
glimpse()
library(raster)
luton <- raster("data/luton/luton.tif")
plot(luton)
#| warning: false
#| message: false
#| code-fold: false
pacman::p_load(tidyverse, maps, jpndistrict, countrycode)
#| code-fold: false
world_map <- map_data("world")
head(world_map)
#| code-fold: false
#| fig.cap: "World countries"
#| fig.height: 4
world_map %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#| fig.cap: "Japan"
#| fig.height: 4
world_map %>%
filter(region == "Japan") %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
head(jpnprefs)
#| warning: false
#| message: false
#| code-fold: false
pacman::p_load(tidyverse, maps, jpndistrict, countrycode)
#| code-fold: false
world_map <- map_data("world")
head(world_map)
#| code-fold: false
#| fig.cap: "World countries"
#| fig.height: 4
world_map %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#| fig.cap: "Japan"
#| fig.height: 4
world_map %>%
filter(region == "Japan") %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#head(jpnprefs)
#| code-fold: false
kochi <- jpn_pref(39)
#| warning: false
#| message: false
#| code-fold: false
pacman::p_load(tidyverse, maps, jpndistrict, countrycode)
#| code-fold: false
world_map <- map_data("world")
head(world_map)
#| code-fold: false
#| fig.cap: "World countries"
#| fig.height: 4
world_map %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#| fig.cap: "Japan"
#| fig.height: 4
world_map %>%
filter(region == "Japan") %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#head(jpnprefs)
#| code-fold: false
#kochi <- jpn_pref(39)
#head(kochi)
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan"
#| fig.height: 4
kochi %>%
ggplot() +
geom_sf()
#| warning: false
#| message: false
#| code-fold: false
pacman::p_load(tidyverse, maps, jpndistrict, countrycode)
#| code-fold: false
world_map <- map_data("world")
head(world_map)
#| code-fold: false
#| fig.cap: "World countries"
#| fig.height: 4
world_map %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#| fig.cap: "Japan"
#| fig.height: 4
world_map %>%
filter(region == "Japan") %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#head(jpnprefs)
#| code-fold: false
#kochi <- jpn_pref(39)
#head(kochi)
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan"
#| fig.height: 4
#kochi %>%
ggplot() +
geom_sf()
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan with random color"
#| fig.height: 4
#kochi %>%
ggplot() +
geom_sf(aes(fill = city), show.legend = FALSE)
#| warning: false
#| message: false
#| code-fold: false
pacman::p_load(tidyverse, maps, jpndistrict, countrycode)
#| code-fold: false
world_map <- map_data("world")
head(world_map)
#| code-fold: false
#| fig.cap: "World countries"
#| fig.height: 4
world_map %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#| fig.cap: "Japan"
#| fig.height: 4
world_map %>%
filter(region == "Japan") %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#head(jpnprefs)
#| code-fold: false
#kochi <- jpn_pref(39)
#head(kochi)
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan"
#| fig.height: 4
#kochi %>%
# ggplot() +
# geom_sf()
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan with random color"
#| fig.height: 4
#kochi %>%
# ggplot() +
# geom_sf(aes(fill = city), show.legend = FALSE)
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan with random color and capital"
#| fig.height: 4
#kochi %>%
ggplot() +
geom_sf(aes(fill = city), show.legend = FALSE) +
geom_point(aes(x = capital_longitude, y = capital_latitude),
colour = "black", data = jpnprefs %>% filter(prefecture == "高知県"))
#| warning: false
#| message: false
#| code-fold: false
pacman::p_load(tidyverse, maps, jpndistrict, countrycode)
#| code-fold: false
world_map <- map_data("world")
head(world_map)
#| code-fold: false
#| fig.cap: "World countries"
#| fig.height: 4
world_map %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#| fig.cap: "Japan"
#| fig.height: 4
world_map %>%
filter(region == "Japan") %>%
ggplot(aes(x = long, y = lat, group = group)) +
geom_polygon(fill = "lightgray", colour = "black", size = 0.1)
#| code-fold: false
#head(jpnprefs)
#| code-fold: false
#kochi <- jpn_pref(39)
#head(kochi)
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan"
#| fig.height: 4
#kochi %>%
# ggplot() +
# geom_sf()
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan with random color"
#| fig.height: 4
#kochi %>%
# ggplot() +
# geom_sf(aes(fill = city), show.legend = FALSE)
#| code-fold: false
#| fig.cap: "Kochi prefecture of Japan with random color and capital"
#| fig.height: 4
#kochi %>%
# ggplot() +
# geom_sf(aes(fill = city), show.legend = FALSE) +
#  geom_point(aes(x = capital_longitude, y = capital_latitude),
#            colour = "black", data = jpnprefs %>% filter(prefecture == "高知県"))
#| code-fold: false
library(sf)
library(tidyverse)
library(jpndistrict) # to get the base map of Japan's prefecture
pacman::p_load(jpndistrict)
install.packages("remotes")
remotes::install_github("uribo/jpndistrict")
#| code-fold: false
library(sf)
library(tidyverse)
library(jpndistrict) # to get the base map of Japan's prefecture
library(ggthemes) # to use theme_map
library(rnaturalearth) # to use ne_countries
library(DT) # to produce data table
#| code-fold: false
global_map <- ne_countries(scale = "small", returnclass = "sf")
#| code-fold: false
df_tokyo_sf <- jpn_pref(13, district = TRUE) %>%
dplyr::filter(str_detect(city, "区"))
#| code-fold: false
df_tokyo_sf %>%
ggplot() +
geom_sf() +
theme_minimal()
#| code-fold: false
head(df_tokyo_sf, 23)
#| code-fold: false
df_tokyo_pop <- read_csv("data/csv/tokyo_pop.csv")
datatable(df_tokyo_pop)
#| code-fold: false
merge_tokyo <- df_tokyo_sf %>%
left_join(df_tokyo_pop, by = "city") %>%
st_as_sf()
#| code-fold: false
merge_tokyo %>%
head() %>%
rmarkdown::paged_table()
#| code-fold: false
#| fig.cap: "Population of Tokyo, Japan"
#| fig.height: 4
map_pop_tokyo <- merge_tokyo %>%
ggplot() +
geom_sf(aes(fill = population)) +
scale_fill_distiller(name = "Population",
palette = "Greens", direction = 1) +
theme_map(base_family = "HiraginoSans-W3") +
theme(legend.position = c(.1, -.1),
legend.direction = "horizontal",
legend.title = element_text(size = 15),
legend.text = element_text(size = 15),
legend.key.size = unit(1, "cm"),
legend.key.width = unit(3,"cm")) +
coord_sf(datum = NA)
map_pop_tokyo
#| code-fold: false
#| fig.cap: "Population of Tokyo, Japan"
#| fig.height: 4
map_pop_tokyo_text <- merge_tokyo %>%
mutate(
text_x = map_dbl(geometry, ~st_centroid(.x)[[1]]),
text_y = map_dbl(geometry, ~st_centroid(.x)[[2]])
) %>%
ggplot() +
geom_sf(aes(fill = population)) +
geom_label(aes(x = text_x, y = text_y, label = city),
size = 1.7, family = "HiraginoSans-W3") +
scale_fill_distiller(name = "Population",
palette = "Greens", direction = 1) +
theme_map(base_family = "HiraginoSans-W3") +
theme(legend.position = c(.8, .05),
legend.title = element_text(size = 10),
legend.text = element_text(size = 5),
legend.key.size = unit(0.5, "cm"),
legend.key.width = unit(1,"cm")) +
coord_sf(datum = NA)
map_pop_tokyo_text
