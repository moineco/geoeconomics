{
  "hash": "f1fef8f67883d40544d25d34508097ed",
  "result": {
    "engine": "knitr",
    "markdown": "# Plotting USA Map\n\n-   We will explore different packages that could help with mapping geographical data, specifically for the USA. At first we need to load necessary packages to execute the maps for this lecture.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(usmap)\nlibrary(tidyverse)\n```\n:::\n\n\n-   Alternatively you can use the pacman package manager for loading the necessary packages for this lecture.\n\n\n::: {.cell}\n\n```{.txt .cell-code  code-fold=\"false\"}\npacman::p_load(usmap, maps, mapdata, sf, plotly, tidyverse, mapview, leaflet, tmap, tmaptools, tigris)\n```\n:::\n\n\n## Using `usmap` package\n\n-   This is probably the most continent package to plot a USA. map along with some data. Plot all states of the USA to create an empty map.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nplot_usmap(regions = \"states\") + \n  labs(title = \"United States\",\n       subtitle = \"This is a map of the United States.\") + \n  theme(panel.background=element_blank())\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n-   Besides states, we could also plot all counties of the USA.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nplot_usmap(regions = \"counties\") + \n  labs(title = \"U.S.A. counties\",\n       subtitle = \"This is a map of the United States.\") + \n  theme(panel.background=element_blank())\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n-   `usmap` also provides many different regions to select\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nplot_usmap(include = .south_region, exclude = c(\"VA\"), labels = TRUE)\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n-   `usmap` also provides north regions map\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nplot_usmap(include = .south_region, exclude = c(\"VA\"), labels = TRUE)\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n-   We can also select certain states by using *state abbreviations*\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nplot_usmap(include = c(\"CT\", \"ME\", \"MA\", \"NH\", \"VT\")) +\n  labs(title = \"New England Region\") +\n  theme(panel.background = element_rect(color = \"black\"))\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## Using `ggplot2` package\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nusa <- map_data('usa')\n```\n:::\n\n\n-   Next, we use geom_ploygon function to plot USA map.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(data=usa, aes(x=long, y=lat, group=group)) + \n  geom_polygon(fill='lightblue') + \n  theme(axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank()) + \n  ggtitle('U.S.A. Map') + \n  coord_fixed(1.3)\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n-   In order to get more information about USA, now we can add state data to the map. Like above, we obtain data from maps and mapdata packages, and use `ggplot2` to plot.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nstate <- map_data(\"state\")\n```\n:::\n\n\n-   Plot the states with `ggplot2`\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(data=state, aes(x=long, y=lat, fill=region, group=group)) + \n  geom_polygon(color = \"white\") + \n  guides(fill=FALSE) + \n  theme(axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank()) + \n  ggtitle('U.S.A. Map with States') + \n  coord_fixed(1.3)\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n-   What if we only care about one state? Definitely, we can draw one state map using `ggplot2`. Firstly we need to filter data.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nwashington <- subset(state, region==\"washington\")\ncounties <- map_data(\"county\")\nwashington_county <- subset(counties, region==\"washington\")\n```\n:::\n\n\n-   Plot Washington\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nca_map <- ggplot(data=washington, mapping=aes(x=long, y=lat, group=group)) + \n  coord_fixed(1.3) + \n  geom_polygon(color=\"black\", fill=\"gray\") + \n  geom_polygon(data=washington_county, fill=NA, color=\"white\") + \n  geom_polygon(color=\"black\", fill=NA) + \n  ggtitle('Washington Map with Counties') + \n  theme(axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank(),\n        axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank())\nca_map\n```\n\n::: {.cell-output-display}\n![](lecture_7_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "lecture_7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}