{
  "hash": "9cfd6f4df1be97020246b9367836050e",
  "result": {
    "engine": "knitr",
    "markdown": "# Population density of Bangladesh\n\n-   Load all necessary packages\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\n```\n:::\n\n\n\n\n\n\n-   Alternatively load all necessary packages by using `pacman` package manager\n\n\n\n\n\n\n::: {.cell}\n\n```{.txt .cell-code  code-fold=\"false\"}\npacman::p_load(tidyverse, stringr, sf, RColorBrewer, leaflet, ggplot2, ggthemes, patchwork, plotly, ggrepel)\n```\n:::\n\n\n\n\n\n\nLoad the `shapefile` of Bangladesh admin level 1 which represents the divisions.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd1_shp <- st_read(\"data/shapefile/bd_adm1_shp/bgd_admbnda_adm1_bbs_20201113.shp\")\nbd2_shp <- st_read(\"data/shapefile/bd_adm2_shp/bgd_admbnda_adm2_bbs_20201113.shp\")\nbd3_shp <- st_read(\"data/shapefile/bd_adm3_shp/bgd_admbnda_adm3_bbs_20201113.shp\")\n```\n:::\n\n\n\n\n\n\n-   Observe the data inside the shape file\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd1_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd2_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd3_shp\n```\n:::\n\n\n\n\n\n\n-   Check the geographic coordinate system of your shapefile\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nst_crs(bd1_shp)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nst_crs(bd2_shp)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nst_crs(bd3_shp)\n```\n:::\n\n\n\n\n\n\n-   Plot the map and show the name of the divisions\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd1_shp) +\n  geom_sf() + \n  geom_sf_text(aes(label = ADM1_EN), size = 2) \n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd2_shp) +\n  geom_sf() \n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd3_shp) +\n  geom_sf() \n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n-   Prepare a custom theme to make the visualization of this map better than previous default version\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ntheme_custom_map <- function(base_size = 11,\n                             base_family = \"\",\n                             base_line_size = base_size / 22,\n                             base_rect_size = base_size / 22) {\n    theme_bw(base_size = base_size, \n             base_family = base_family,\n             base_line_size = base_line_size) %+replace%\n        theme(\n            axis.title = element_blank(), \n            axis.text = element_blank(),\n            axis.ticks = element_blank(),\n            complete = TRUE\n        )\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd1_shp) +\n  geom_sf() +\n  geom_sf_text(aes(label = ADM1_EN), size = 2) +\n  theme_custom_map()\n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd2_shp) +\n  geom_sf() +\n   theme_custom_map()\n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd3_shp) +\n  geom_sf() +\n   theme_custom_map()\n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n-   Import population data of all divisions of Bangladesh\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd1_pop <- read.csv(\"data/csv/bd_pop_adm1_2022.csv\")\nbd2_pop <- read.csv(\"data/csv/bd_pop_adm2_2022.csv\")\nbd3_pop <- read.csv(\"data/csv/bd_pop_adm3_2022.csv\")\n```\n:::\n\n\n\n\n\n\n-   Merge the shapefile and csv data-set\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd1_shp_pop <- merge(bd1_shp, bd1_pop, by=c(\"ADM1_PCODE\"))\nbd1_shp_pop <- st_make_valid(bd1_shp_pop)\nglimpse(bd1_shp_pop)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd2_shp_pop <- merge(bd2_shp, bd2_pop, by=c(\"ADM2_PCODE\"))\nbd2_shp_pop <- st_make_valid(bd2_shp_pop)\nglimpse(bd2_shp_pop)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbd3_shp_pop <- merge(bd3_shp, bd3_pop, by=c(\"ADM3_PCODE\"))\nbd3_shp_pop <- st_make_valid(bd3_shp_pop)\nglimpse(bd3_shp_pop)\n```\n:::\n\n\n\n\n\n\n-   Draw the map ADM1\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd1_shp_pop) +\n    geom_sf(aes(fill=F_TL), color = \"white\", lwd = 0.07) +\n    geom_sf_text(aes(label = ADM1_EN), size = 2) +\n    scale_fill_viridis_c(option = \"magma\", name = \"Population\")\n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n-   By loading additional package, we can draw for informative maps\n\n\n\n\n\n\n::: {.cell}\n\n```{.txt .cell-code  code-fold=\"false\"}\nggplot(bd1_shp_pop) +\n    geom_sf(aes(fill=F_TL), color = \"white\", lwd = 0.07) +\n    geom_sf_text(aes(label = ADM1_EN), size = 2) +\n    scale_fill_viridis_c(option = \"magma\", name = \"Population\") +\n    theme_map() + \n    theme(legend.direction=\"horizontal\") +\n     labs(title = \"Divisions of Bangladesh\", \n         subtitle = \"Population density of Bangladesh\", \n         caption = \"Source of data: BBS\")\n```\n:::\n\n\n\n\n\n\n-   Draw the map ADM2\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd2_shp_pop) +\n    geom_sf(aes(fill=F_TL), color = \"white\", lwd = 0.07) +\n    #geom_sf_text(aes(label = ADM2_EN), size = 2) +\n    scale_fill_viridis_c(option = \"magma\", name = \"Population\")\n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n-   By loading additional package, we can draw for informative maps\n\n\n\n\n\n\n::: {.cell}\n\n```{.txt .cell-code  code-fold=\"false\"}\nggplot(bd2_shp_pop) +\n    geom_sf(aes(fill=F_TL), color = \"white\", lwd = 0.07) +\n    #geom_sf_text(aes(label = ADM2_EN), size = 2) +\n    scale_fill_viridis_c(option = \"magma\", name = \"Population\") +\n    theme_map() + \n    theme(legend.direction=\"horizontal\") +\n     labs(title = \"Districts of Bangladesh\", \n         subtitle = \"Population density of Bangladesh\", \n         caption = \"Source of data: BBS\")\n```\n:::\n\n\n\n\n\n\n-   Draw the map ADM3\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(bd3_shp_pop) +\n    geom_sf(aes(fill=F_TL), color = \"white\", lwd = 0.07) +\n    #geom_sf_text(aes(label = ADM2_EN), size = 2) +\n    scale_fill_viridis_c(option = \"magma\", name = \"Population\")\n```\n\n::: {.cell-output-display}\n![](lecture_10_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n-   By loading additional package, we can draw for informative maps\n\n\n\n\n\n\n::: {.cell}\n\n```{.txt .cell-code  code-fold=\"false\"}\nggplot(bd3_shp_pop) +\n    geom_sf(aes(fill=F_TL), color = \"white\", lwd = 0.07) +\n    #geom_sf_text(aes(label = ADM2_EN), size = 2) +\n    scale_fill_viridis_c(option = \"magma\", name = \"Population\") +\n    theme_map() + \n    theme(legend.direction=\"horizontal\") +\n     labs(title = \"Upazila/Thana of Bangladesh\", \n         subtitle = \"Population density of Bangladesh\", \n         caption = \"Source of data: BBS\")\n```\n:::\n",
    "supporting": [
      "lecture_10_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}